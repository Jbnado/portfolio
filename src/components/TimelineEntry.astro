---
import TechBadge from './TechBadge.astro';

interface Props {
  date: string;
  title: string;
  description: string;
  type: 'career' | 'project';
  tech?: string[];
  href?: string;
}

const { date, title, description, type, tech = [], href } = Astro.props;
---

<li class={`timeline-entry timeline-entry--${type}`}>
  <div class="timeline-marker">
    <span class={`timeline-dot timeline-dot--${type}`}></span>
  </div>
  <div class="timeline-content">
    <span class="timeline-date">{date}</span>
    {href ? (
      <h3 class="timeline-title">
        <a href={href} class="timeline-title-link">{title}</a>
      </h3>
    ) : (
      <h3 class="timeline-title">{title}</h3>
    )}
    <p class="timeline-description">{description}</p>
    {tech.length > 0 && (
      <div class="timeline-badges">
        {tech.map((name) => <TechBadge name={name} />)}
      </div>
    )}
  </div>
</li>

<style is:global>
  .timeline-list {
    list-style: none;
    padding: 0;
    margin: 0;
    position: relative;
  }

  /* Vertical line */
  .timeline-list::before {
    content: "";
    position: absolute;
    left: 5px;
    top: 12px;
    bottom: 12px;
    width: 1px;
    background: var(--color-border);
  }

  .timeline-entry {
    display: flex;
    gap: 1.5rem;
    padding-bottom: 3rem;
    position: relative;
  }

  .timeline-entry:last-child {
    padding-bottom: 0;
  }

  /* Marker (dot) */
  .timeline-marker {
    flex-shrink: 0;
    position: relative;
    z-index: 1;
    padding-top: 4px;
  }

  .timeline-dot {
    display: block;
    width: 11px;
    height: 11px;
    border-radius: 50%;
  }

  .timeline-dot--career {
    background: var(--color-accent);
  }

  .timeline-dot--project {
    background: transparent;
    border: 2px solid var(--color-accent-secondary);
  }

  /* Content */
  .timeline-content {
    flex: 1;
    min-width: 0;
  }

  .timeline-date {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--color-accent);
    text-transform: uppercase;
    letter-spacing: 0.04em;
    margin-bottom: 0.25rem;
  }

  .timeline-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-text-primary);
    letter-spacing: var(--font-heading-tracking);
    margin-bottom: 0.5rem;
  }

  .timeline-title-link {
    color: inherit;
    text-decoration: none;
    transition: color 300ms cubic-bezier(0.25, 0.1, 0.25, 1) 100ms;
  }

  .timeline-title-link:hover {
    color: var(--color-accent);
  }

  .timeline-description {
    font-size: 0.875rem;
    line-height: 1.6;
    color: var(--color-text-secondary);
    margin-bottom: 0.75rem;
  }

  @media (min-width: 768px) {
    .timeline-description {
      font-size: 1rem;
    }
  }

  .timeline-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.375rem;
  }

  .timeline-badges .tech-badge {
    font-size: 0.625rem;
    padding: 0.125rem 0.5rem;
  }

  /* Dark mode â€” punk neon */
  .dark .timeline-entry {
    border-bottom: 1px dashed rgba(162, 119, 255, 0.2);
  }

  .dark .timeline-entry:last-child {
    border-bottom: none;
  }

  .dark .timeline-date {
    color: #61ffca;
    text-shadow: 0 0 10px rgba(97, 255, 202, 0.3);
  }

  .dark .timeline-list::before {
    border-left: 2px dashed rgba(162, 119, 255, 0.4);
    background: none;
    width: 0;
  }

  .dark .timeline-dot--career {
    background: #61ffca;
    box-shadow:
      0 0 8px rgba(97, 255, 202, 0.6),
      0 0 20px rgba(97, 255, 202, 0.3);
    width: 13px;
    height: 13px;
  }

  .dark .timeline-dot--project {
    border-color: #f694ff;
    box-shadow:
      0 0 8px rgba(246, 148, 255, 0.4),
      0 0 20px rgba(246, 148, 255, 0.2);
    width: 13px;
    height: 13px;
  }
</style>

---
import { Image } from 'astro:assets';
import SectionTitle from './SectionTitle.astro';
import { t, getCvPath } from '../i18n/utils';
import fistImg from '../assets/imgs/pngtree-powerful-fist-with-wrench-a-symbol-of-worker-empowerment.png';
import angelaDavisImg from '../assets/imgs/pngtree-angela-davis-black-panther-portrait-bold-afro-graphic-style-flat-colors.webp';
import sharkboyImg from '../assets/imgs/sharkboy-lavagirl-kiss-scene-low-quality.png';

interface Props {
  locale?: string;
}

const { locale = 'pt-br' } = Astro.props;
---

<section id="contacto" class="contact-section" style="overflow:hidden">
  <!-- PUNK: Fist/wrench — left side, with neon pop art background -->
  <div class="punk-sticker punk-sticker-bg" aria-hidden="true"
    style="width:180px;top:8%;left:1%;--punk-rotate:-12deg;animation-delay:0.3s;opacity:0.85">
    <Image src={fistImg} alt="" width={360} format="webp" quality={80}
      style="width:100%;height:100%;object-fit:contain" />
  </div>

  <!-- PUNK: Angela Davis — right side -->
  <Image src={angelaDavisImg} alt="" width={320} format="webp" quality={80}
    class="punk-sticker" style="width:160px;bottom:5%;right:2%;--punk-rotate:8deg;animation-delay:1.2s;opacity:0.8" />

  <!-- PUNK: Sharkboy — floating mid-right -->
  <Image src={sharkboyImg} alt="" width={260} format="webp" quality={70}
    class="punk-sticker punk-zine-filter" style="width:130px;top:15%;right:12%;--punk-rotate:-18deg;animation-delay:2s;opacity:0.55" />

  <!-- PUNK: Decorations -->
  <span class="punk-ono" style="top:5%;right:30%;font-size:2rem;color:#61ffca;transform:rotate(-10deg);text-shadow:0 0 15px rgba(97,255,202,0.5)" aria-hidden="true">&#9733;</span>
  <span class="punk-ono" style="bottom:20%;left:10%;font-size:1.5rem;color:#f694ff;transform:rotate(15deg);text-shadow:0 0 12px rgba(246,148,255,0.4)" aria-hidden="true">&#9733;</span>
  <span class="punk-ono" style="top:50%;left:5%;font-size:1rem;color:#82e2ff;transform:rotate(-25deg);text-shadow:0 0 10px rgba(130,226,255,0.4)" aria-hidden="true">YEAH!</span>
  <span class="punk-menacing" style="bottom:10%;right:15%;font-size:1.5rem;color:rgba(162,119,255,0.15);--punk-rotate:-8deg;animation-delay:1.5s" aria-hidden="true">gogo</span>

  <div class="contact-gradient-border" aria-hidden="true"></div>
  <div class="contact-container">
    <p class="contact-cta">{t('contact.cta', locale)}</p>
    <p class="contact-subtitle">{t('contact.subtitle', locale)}</p>

    <div class="contact-links">
      <a
        id="email-link"
        href="#"
        class="contact-link"
        aria-label={t('contact.emailLabel', locale)}
      >
        <span>{t('contact.email', locale)}</span>
        <span aria-hidden="true">↗</span>
      </a>
      <a
        href="https://linkedin.com/in/jbnado"
        target="_blank"
        rel="noopener noreferrer"
        class="contact-link"
        aria-label={t('contact.linkedinLabel', locale)}
      >
        <span>{t('contact.linkedin', locale)}</span>
        <span aria-hidden="true">↗</span>
      </a>
      <a
        href="https://github.com/Jbnado"
        target="_blank"
        rel="noopener noreferrer"
        class="contact-link"
        aria-label={t('contact.githubLabel', locale)}
      >
        <span>{t('contact.github', locale)}</span>
        <span aria-hidden="true">↗</span>
      </a>
      <a
        href={getCvPath(locale)}
        download
        class="contact-link contact-link--cv"
        aria-label={t('contact.downloadCvLabel', locale)}
      >
        <span>{t('contact.downloadCv', locale)}</span>
        <span aria-hidden="true">↓</span>
      </a>
    </div>
  </div>

  <script is:inline>
    (function(){
      var u='bernardojoao9';var d='gmail.com';
      var l=document.getElementById('email-link');
      if(l){l.href='mailto:'+u+'@'+d;}
    })();
  </script>
</section>

<style is:global>
  .contact-section {
    position: relative;
    padding: 8rem 0 6rem;
  }

  .contact-gradient-border {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 1000px;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      var(--color-border) 20%,
      var(--color-border) 80%,
      transparent
    );
  }

  .contact-container {
    max-width: 700px;
    margin: 0 auto;
    padding: 0 1.5rem;
    text-align: center;
  }

  .contact-cta {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin-top: 2rem;
    line-height: 1.2;
    letter-spacing: -0.02em;
  }

  .contact-subtitle {
    font-size: 1rem;
    color: var(--color-text-secondary);
    margin-top: 0.75rem;
    line-height: 1.6;
  }

  .contact-links {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.5rem;
    margin-top: 2.5rem;
  }

  .contact-link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-family: var(--font-mono);
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--color-accent);
    text-decoration: none;
    padding: 0.5rem 0;
    background-image: linear-gradient(currentColor, currentColor);
    background-position: 0% 100%;
    background-repeat: no-repeat;
    background-size: 0% 2px;
    transition: background-size 200ms cubic-bezier(0.25, 0.1, 0.25, 1);
  }

  .contact-link:hover {
    background-size: 100% 2px;
  }

  .contact-link:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 4px;
    border-radius: 2px;
  }

  .contact-link--cv {
    color: var(--color-text-primary);
    font-weight: 600;
  }

  @media (min-width: 768px) {
    .contact-cta {
      font-size: 2.75rem;
    }
    .contact-subtitle {
      font-size: 1.125rem;
    }
  }

  /* Dark mode — punk neon */
  .dark .contact-gradient-border {
    background: linear-gradient(
      to right,
      transparent,
      #a277ff 15%,
      #61ffca 35%,
      #f694ff 55%,
      #82e2ff 75%,
      transparent
    );
    height: 3px;
    box-shadow: 0 0 20px rgba(162, 119, 255, 0.3);
  }

  .dark .contact-cta {
    font-family: var(--font-punk);
    text-shadow:
      0 0 30px rgba(162, 119, 255, 0.4),
      0 0 60px rgba(162, 119, 255, 0.15);
    transform: rotate(-1deg);
  }

  .dark .contact-link {
    position: relative;
    text-shadow: 0 0 10px rgba(162, 119, 255, 0.3);
  }

  .dark .contact-link:hover {
    text-shadow: 0 0 15px rgba(97, 255, 202, 0.5);
  }

  /* JoJo ゴゴゴ menacing hover on contact links */
  .dark .contact-link::after {
    content: "";
    position: absolute;
    right: -0.5rem;
    top: -0.5rem;
    font-size: 1.25rem;
    color: transparent;
    font-weight: 900;
    writing-mode: vertical-rl;
    letter-spacing: -0.15em;
    pointer-events: none;
    z-index: 20;
  }

  .dark .contact-link:hover::after {
    content: "ゴゴゴ";
    color: rgba(97, 255, 202, 0.5);
    text-shadow: 0 0 12px rgba(97, 255, 202, 0.3);
    animation: menacing-float 2s ease-in-out infinite;
  }

  /* Mobile: sticker repositioning */
  @media (max-width: 767px) {
    .dark .contact-section .punk-sticker-bg {
      width: 100px !important;
      top: 3% !important;
      left: -1% !important;
    }
    .dark .contact-section .punk-sticker:nth-of-type(2) {
      width: 80px !important;
      bottom: 2% !important;
      right: -1% !important;
    }
    .dark .contact-section .punk-sticker:nth-of-type(3) {
      width: 70px !important;
      top: 10% !important;
      right: 5% !important;
    }
    .dark .contact-cta {
      transform: rotate(-0.5deg);
    }
  }

  /* Extra small screens (≤480px) */
  @media (max-width: 480px) {
    .dark .contact-section .punk-sticker-bg {
      width: 70px !important;
    }
    .dark .contact-section .punk-sticker:nth-of-type(3) {
      display: none !important;
    }
  }
</style>
